# Music Library API

REST API для управления библиотекой песен с возможностью хранения, поиска и обработки текстов песен.

## Функциональность

API предоставляет следующие возможности:
- Создание, чтение, обновление и удаление песен
- Автоматическое получение метаданных песен (текст, дата релиза, ссылка) из внешнего сервиса
- Фильтрация песен по различным параметрам (название, исполнитель, дата и т.д.)
- Разбиение текста песни на куплеты и их хранение
- Получение куплетов с пагинацией

## API-эндпоинты

1. **POST /api/song** - Создание новой песни
   - Автоматически получает метаданные из внешнего сервиса
   - Разбивает текст на куплеты

2. **GET /api/song/{id}** - Получение информации о песне по ID

3. **PUT /api/song/{id}** - Обновление данных песни

4. **DELETE /api/song/{id}** - Удаление песни

5. **GET /api/song** - Поиск песен с фильтрацией
   - Поддерживает фильтры по названию, исполнителю, дате релиза и тексту

6. **GET /api/verses/{id}** - Получение куплетов песни с пагинацией

## Технологии

- Go 1.22+
- PostgreSQL
- Goose (для миграций базы данных)
- Squirrel (для построения SQL-запросов)
- Swagger/OpenAPI (для документации API)
- Structured logging

## Установка и запуск

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/wiqwi12/effective-mobile-test.git
   cd effective-mobile-test
   ```

2. Создайте файл .env на основе .env.example:
   ```bash
   cp .env.example .env
   ```

3. Отредактируйте .env, указав настройки для вашей среды

4. Запустите приложение:
   ```bash
   go run cmd/main.go
   ```

5. Документация API доступна по адресу:
   ```
   http://[ваш_хост]:[ваш_порт]/swagger/index.html
   ```

## Структура проекта

Проект следует принципам Clean Architecture:

- `cmd/` - точка входа в приложение
- `internal/` - внутренний код приложения
  - `domain/` - бизнес-модели и интерфейсы
  - `infrastructure/` - реализации интерфейсов, работа с базой данных
  - `interface/` - HTTP-handlers и middleware
  - `service/` - бизнес-логика приложения
- `pkg/` - утилиты и общие компоненты

## Лицензия

MIT
